<th:block th:replace="~{layouts/base :: html(
    title='Product List',
    headResources=~{::headResources},
    content=~{::content}
)}">

    <th:block th:fragment="headResources">
        <link rel="stylesheet" th:href="@{/css/admin.css}">
    </th:block>

    <main th:fragment="content">
        <h1>Admin Product List</h1>

        <div class="table-container">
            <div style="margin-bottom: 1.5rem; text-align: right;">
                <a th:href="@{/products/new}" class="hero-button" style="padding: 0.5rem 1rem;">
                    Add New Product
                </a>
            </div>

            <table class="table">
                <thead>
                    <tr class="table-header">
                        <th class="table-cell">ID</th>
                        <th class="table-cell" style="text-align: left;">Name</th>
                        <th class="table-cell" style="text-align: right;">Price</th>
                        <th class="table-cell" style="text-align: center;">Inventory</th>
                        <th class="table-cell" style="width: 150px; text-align: center;">Actions</th>
                    </tr>
                </thead>
                <tbody>
                    <tr class="table-row" th:each="product : ${products}">
                        <td class="table-cell" th:text="${product.id}">1</td>

                        <td class="table-cell" style="text-align: left;">
                            <a th:href="@{/product/} + ${product.id}" th:text="${product.name}"
                                style="color: var(--primary); font-weight: 500;">Product A</a>
                        </td>

                        <td class="table-cell" style="text-align: right;">
                            $<span th:text="${#numbers.formatCurrency(product.price/100.0)}"></span>
                        </td>

                        <td class="table-cell" style="text-align: center;">
                            <span th:text="${product.inventory != null ? product.inventory.stock : 'N/A'}"></span>
                        </td>

                        <td class="table-cell action-buttons-cell">
                            <a th:href="@{/products/edit/} + ${product.id}" class="edit-button">Edit</a>

                            <form th:action="@{/products/delete/} + ${product.id}" method="post"
                                style="display: inline-block;">
                                <input type="hidden" name="_method" value="delete" />

                                <button type="submit" class="delete-button" th:data-product-name="${product.name}"
                                    onclick="return confirmDeletion(this);">
                                    Delete
                                </button>
                            </form>
                        </td>
                    </tr>
                </tbody>
            </table>

            <p th:if="${#lists.isEmpty(products)}"
                style="text-align: center; color: var(--text-secondary); padding: 2rem; border: 1px dashed var(--border-color); margin-top: 1.5rem; border-radius: 0.5rem;">
                No products found.
            </p>
        </div>

        <script>
            function confirmDeletion(buttonElement) {
                const productName = buttonElement.getAttribute('data-product-name');
                return confirm('Are you sure you want to delete the product "' + productName + '" ?');
            }
        </script>
    </main>

</th:block>